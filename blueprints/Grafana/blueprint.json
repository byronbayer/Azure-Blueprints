{
    "properties": {
        "description": "Grafana infrastructure Blueprint",
        "targetScope": "subscription",
        "parameters": {
            "owner": {
                "type": "string",
                "metadata": {
                    "description": "The project identifier ie s126 for T-Levels or S141 for Signin"
                }
            },
            "applicationName": {
                "type": "string",
                "metadata": {
                    "description": "The application that is going to be using the mySql server i.e. T-Levels or Signin"
                }
            },
            "environment": {
                "type": "string",
                "metadata": {
                    "description": "This is what the infrastructure is going to be used for such as gfa for Grafana"
                }
            },
            "mySqlSkuName": {
                "type": "string",
                "defaultValue": "B_Gen5_2"
            },
            "mySqlSkuTier": {
                "type": "string",
                "defaultValue": "Basic"
            },
            "mySqlSkuFamily": {
                "type": "string",
                "defaultValue": "Gen5"
            },
            "mySqlStorageMB": {
                "type": "string",
                "defaultValue": "51200"
            },
            "mySqlAdminLogin": {
                "type": "string"
            },
            "mySqlAdminPassword": {
                "type": "securestring"
            },
            "firewallRuleNamePrefix": {
                "type": "string",
                "metadata": {
                    "description": "The prefix for the firewall rule name, it will be appended by the IP address"
                }
            },
            "ipAddresses": {
                "type": "array",
                "minLength": 1,
                "metadata": {
                    "description": "Array of IP addresses to whitelist against a SQL server"
                }
            },
            "serverName": {
                "type": "string",
                "metadata": {
                    "description": "Name of the server to add firewall rules to"
                }
            },
            "appServicePlanName": {
                "type": "string",
                "metadata": {
                    "description": "The name of the App Service Plan"
                }
            },
            "appServicePlanSku": {
                "type": "object"
            },
            "appServicePlanOS": {
                "type": "string",
                "metadata": {
                    "description": "Windows or Linux"
                }
            },
            "appServicePlanIsLinux": {
                "type": "bool",
                "metadata": {
                    "description": "Whether the App Service Plan is Linux or not"
                }
            },
            "perSiteScalingEnabled": {
                "type": "bool",
                "defaultValue": false,
                "metadata": {
                    "description": "Whether the App Service Plan has perSiteScaling enabled"
                }
            },
            "appServiceName": {
                "type": "string",
                "metadata": {
                    "description": "The name of the App Service"
                }
            },
            "appServicePlanRG": {
                "type": "string",
                "metadata": {
                    "description": "Resource Group where the ASP lives"
                }
            },
            "runtimeStack": {
                "type": "string",
                "metadata": {
                    "description": "The name of the runtime stack for the container"
                }
            },
            "customHostName": {
                "type": "string",
                "defaultValue": ""
            },
            "certificateThumbprint": {
                "type": "string",
                "defaultValue": "",
                "metadata": {
                    "description": "This can be passed into the template via the reference function: [reference(resourceId(parameters('certificateResourceGroup'), 'Microsoft.Web/certificates', parameters('certificateName')), '2016-03-01').Thumbprint]"
                }
            },
            "appServiceAppSettings": {
                "type": "array",
                "defaultValue": []
            },
            "deployStagingSlot": {
                "type": "bool",
                "defaultValue": true
            },
            "azureStorageAccounts": {
                "type": "object",
                "defaultValue": {}
            },
            "storageAccountType": {
                "type": "string",
                "defaultValue": "Standard_LRS",
                "allowedValues": [
                    "Standard_LRS",
                    "Standard_GRS",
                    "Standard_RAGRS",
                    "Standard_ZRS",
                    "Premium_LRS"
                ]
            },
            "accessTier": {
                "type": "string",
                "defaultValue": "Hot",
                "allowedValues": [
                    "Hot",
                    "Cool"
                ],
                "metadata": {
                    "description": "This setting is required if using BlobStorage as the storageKind, otherwise can be left blank"
                }
            },
            "storageKind": {
                "type": "string",
                "defaultValue": "BlobStorage",
                "allowedValues": [
                    "Storage",
                    "StorageV2",
                    "BlobStorage"
                ]
            },
            "storageAccountName": {
                "type": "string",
                "metadata": {
                    "description": "Name of the storage account the container belongs to"
                }
            },
            "fileShareName": {
                "type": "string",
                "metadata": {
                    "description": "Name of the file share"
                }
            },
            "shareQuota": {
                "type": "int",
                "defaultValue": 5120,
                "metadata": {
                    "description": "Share quota for the fileshare"
                }
            }
        },
        "resourceGroups": {
            "bpRg": {
                "description": "Destination Resource Group"
            }
        }
    },
    "type": "Microsoft.Blueprint/blueprints"
}